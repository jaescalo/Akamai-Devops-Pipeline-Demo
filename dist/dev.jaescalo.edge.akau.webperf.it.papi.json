{
    "rules": {
        "name": "default",
        "children": [
            {
                "name": "Performance",
                "children": [
                    {
                        "name": "Compressible Objects",
                        "children": [],
                        "behaviors": [
                            {
                                "name": "gzipResponse",
                                "options": {
                                    "behavior": "ALWAYS"
                                }
                            }
                        ],
                        "criteria": [
                            {
                                "name": "contentType",
                                "options": {
                                    "matchCaseSensitive": false,
                                    "matchOperator": "IS_ONE_OF",
                                    "matchWildcard": true,
                                    "values": [
                                        "text/*",
                                        "application/javascript",
                                        "application/x-javascript",
                                        "application/x-javascript*",
                                        "application/json",
                                        "application/x-json",
                                        "application/*+json",
                                        "application/*+xml",
                                        "application/text",
                                        "application/vnd.microsoft.icon",
                                        "application/vnd-ms-fontobject",
                                        "application/x-font-ttf",
                                        "application/x-font-opentype",
                                        "application/x-font-truetype",
                                        "application/xmlfont/eot",
                                        "application/xml",
                                        "font/opentype",
                                        "font/otf",
                                        "font/eot",
                                        "image/svg+xml",
                                        "image/vnd.microsoft.icon"
                                    ]
                                }
                            }
                        ],
                        "criteriaMustSatisfy": "all",
                        "comments": "Compresses content to improve performance of clients with slow connections. Applies Last Mile Acceleration to requests when the returned object supports gzip compression."
                    }
                ],
                "behaviors": [
                    {
                        "name": "enhancedAkamaiProtocol",
                        "options": {
                            "display": ""
                        }
                    },
                    {
                        "name": "http2",
                        "options": {
                            "enabled": ""
                        }
                    },
                    {
                        "name": "allowTransferEncoding",
                        "options": {
                            "enabled": true
                        }
                    },
                    {
                        "name": "removeVary",
                        "options": {
                            "enabled": true
                        }
                    },
                    {
                        "name": "prefetch",
                        "options": {
                            "enabled": true
                        }
                    }
                ],
                "criteria": [],
                "criteriaMustSatisfy": "all",
                "comments": "Improves the performance of delivering objects to end users. Behaviors in this rule are applied to all requests as appropriate."
            },
            {
                "name": "Offload",
                "children": [
                    {
                        "name": "CSS and JavaScript",
                        "children": [],
                        "behaviors": [
                            {
                                "name": "caching",
                                "options": {
                                    "behavior": "MAX_AGE",
                                    "mustRevalidate": false,
                                    "ttl": "24d"
                                }
                            },
                            {
                                "name": "prefreshCache",
                                "options": {
                                    "enabled": true,
                                    "prefreshval": 90
                                }
                            },
                            {
                                "name": "prefetchable",
                                "options": {
                                    "enabled": true
                                }
                            }
                        ],
                        "criteria": [
                            {
                                "name": "fileExtension",
                                "options": {
                                    "matchCaseSensitive": false,
                                    "matchOperator": "IS_ONE_OF",
                                    "values": [
                                        "css",
                                        "js"
                                    ]
                                }
                            }
                        ],
                        "criteriaMustSatisfy": "any",
                        "comments": "Overrides the default caching behavior for CSS and JavaScript objects that are cached on the edge server. Because these object types are dynamic, the TTL is brief."
                    },
                    {
                        "name": "Static Objects",
                        "children": [],
                        "behaviors": [
                            {
                                "name": "caching",
                                "options": {
                                    "behavior": "MAX_AGE",
                                    "mustRevalidate": false,
                                    "ttl": "7d"
                                }
                            },
                            {
                                "name": "prefreshCache",
                                "options": {
                                    "enabled": true,
                                    "prefreshval": 90
                                }
                            },
                            {
                                "name": "prefetchable",
                                "options": {
                                    "enabled": true
                                }
                            }
                        ],
                        "criteria": [
                            {
                                "name": "fileExtension",
                                "options": {
                                    "matchCaseSensitive": false,
                                    "matchOperator": "IS_ONE_OF",
                                    "values": [
                                        "aif",
                                        "aiff",
                                        "au",
                                        "avi",
                                        "bin",
                                        "bmp",
                                        "cab",
                                        "carb",
                                        "cct",
                                        "cdf",
                                        "class",
                                        "doc",
                                        "dcr",
                                        "dtd",
                                        "exe",
                                        "flv",
                                        "gcf",
                                        "gff",
                                        "gif",
                                        "grv",
                                        "hdml",
                                        "hqx",
                                        "ico",
                                        "ini",
                                        "jpeg",
                                        "jpg",
                                        "mov",
                                        "mp3",
                                        "nc",
                                        "pct",
                                        "pdf",
                                        "png",
                                        "ppc",
                                        "pws",
                                        "swa",
                                        "swf",
                                        "txt",
                                        "vbs",
                                        "w32",
                                        "wav",
                                        "wbmp",
                                        "wml",
                                        "wmlc",
                                        "wmls",
                                        "wmlsc",
                                        "xsd",
                                        "zip",
                                        "pict",
                                        "tif",
                                        "tiff",
                                        "mid",
                                        "midi",
                                        "ttf",
                                        "eot",
                                        "woff",
                                        "woff2",
                                        "otf",
                                        "svg",
                                        "svgz",
                                        "webp",
                                        "jxr",
                                        "jar",
                                        "jp2"
                                    ]
                                }
                            }
                        ],
                        "criteriaMustSatisfy": "any",
                        "comments": "Overrides the default caching behavior for images, music, and similar objects that are cached on the edge server. Because these object types are static, the TTL is long."
                    },
                    {
                        "name": "Uncacheable Responses",
                        "children": [],
                        "behaviors": [
                            {
                                "name": "downstreamCache",
                                "options": {
                                    "behavior": "TUNNEL_ORIGIN"
                                }
                            }
                        ],
                        "criteria": [
                            {
                                "name": "cacheability",
                                "options": {
                                    "matchOperator": "IS_NOT",
                                    "value": "CACHEABLE"
                                }
                            }
                        ],
                        "criteriaMustSatisfy": "all",
                        "comments": "Overrides the default downstream caching behavior for uncacheable object types. Instructs the edge server to pass Cache-Control and/or Expire headers from the origin to the client."
                    }
                ],
                "behaviors": [
                    {
                        "name": "caching",
                        "options": {
                            "behavior": "NO_STORE"
                        }
                    },
                    {
                        "name": "cacheError",
                        "options": {
                            "enabled": true,
                            "preserveStale": true,
                            "ttl": "10s"
                        }
                    },
                    {
                        "name": "downstreamCache",
                        "options": {
                            "allowBehavior": "LESSER",
                            "behavior": "ALLOW",
                            "sendHeaders": "CACHE_CONTROL_AND_EXPIRES",
                            "sendPrivate": false
                        }
                    },
                    {
                        "name": "tieredDistribution",
                        "options": {
                            "enabled": true,
                            "tieredDistributionMap": "CH2"
                        }
                    }
                ],
                "criteria": [],
                "criteriaMustSatisfy": "all",
                "comments": "Controls caching, which offloads traffic away from the origin. Most objects types are not cached. However, the child rules override this behavior for certain subsets of requests."
            },
            {
                "name": "/admin/ protection",
                "children": [],
                "behaviors": [
                    {
                        "name": "modifyOutgoingResponseHeader",
                        "options": {
                            "action": "MODIFY",
                            "standardModifyHeaderName": "OTHER",
                            "newHeaderValue": "Basic realm=\"DevOps Admin Area\"",
                            "avoidDuplicateHeaders": false,
                            "customHeaderName": "WWW-Authenticate"
                        }
                    },
                    {
                        "name": "constructResponse",
                        "options": {
                            "enabled": true,
                            "body": "Unauthorized",
                            "responseCode": 401,
                            "forceEviction": false
                        }
                    }
                ],
                "criteria": [
                    {
                        "name": "path",
                        "options": {
                            "matchOperator": "MATCHES_ONE_OF",
                            "values": [
                                "/admin/*"
                            ],
                            "matchCaseSensitive": false
                        }
                    },
                    {
                        "name": "requestHeader",
                        "options": {
                            "headerName": "Authorization",
                            "matchOperator": "IS_NOT_ONE_OF",
                            "values": [
                                "Basic YWRtaW46czNjcjN0IQ=="
                            ],
                            "matchWildcardName": false,
                            "matchWildcardValue": false,
                            "matchCaseSensitiveValue": true
                        }
                    }
                ],
                "criteriaMustSatisfy": "all"
            }
        ],
        "behaviors": [
            {
                "name": "origin",
                "options": {
                    "cacheKeyHostname": "ORIGIN_HOSTNAME",
                    "compress": true,
                    "enableTrueClientIp": false,
                    "forwardHostHeader": "ORIGIN_HOSTNAME",
                    "hostname": "webapp.o.edge.akau.webperf.it",
                    "httpPort": 80,
                    "httpsPort": 443,
                    "originSni": true,
                    "originType": "CUSTOMER",
                    "verificationMode": "CUSTOM",
                    "originCertificate": "",
                    "ports": "",
                    "customValidCnValues": [
                        "{{Origin Hostname}}",
                        "{{Forward Host Header}}"
                    ],
                    "originCertsToHonor": "STANDARD_CERTIFICATE_AUTHORITIES",
                    "standardCertificateAuthorities": [
                        "akamai-permissive"
                    ]
                }
            },
            {
                "name": "cpCode",
                "options": {
                    "value": {
                        "id": 835882
                    }
                }
            },
            {
                "name": "allowPost",
                "options": {
                    "allowWithoutContentLength": false,
                    "enabled": true
                }
            }
        ],
        "options": {
            "is_secure": false
        },
        "variables": [],
        "comments": "The behaviors in the Default Rule apply to all requests for the property hostname(s) unless another rule overrides the Default Rule settings."
    }
}